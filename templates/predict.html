<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Heart Disease Prediction</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="container mt-5">
    <h2 class="mb-4">Predict Heart Disease</h2>
    <form id="predictForm">
        <div class="row">
            <div class="col-md-4 mb-3">
                <label>Age</label>
                <input type="number" name="age" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
                <label>Gender (0=Female,1=Male)</label>
                <input type="number" name="gender" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
                <label>CP (Chest Pain Type)</label>
                <input type="number" name="cp" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
                <label>Resting BP</label>
                <input type="number" name="trestbps" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
                <label>Cholesterol</label>
                <input type="number" name="chol" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
                <label>Fasting BS (0/1)</label>
                <input type="number" name="fbs" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
                <label>Rest ECG</label>
                <input type="number" name="restecg" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
                <label>Max Heart Rate</label>
                <input type="number" name="thalach" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
                <label>Exercise Induced Angina (0/1)</label>
                <input type="number" name="exang" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
                <label>Oldpeak</label>
                <input type="number" step="0.1" name="oldpeak" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
                <label>Slope</label>
                <input type="number" name="slope" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
                <label>CA</label>
                <input type="number" name="ca" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
                <label>Thal</label>
                <input type="number" name="thal" class="form-control" required>
            </div>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Predict</button>
    </form>
    <div class="mt-4">
        <h4>Prediction Result:</h4>
        <p id="result"></p>
    </div>
    <a href="/" class="btn btn-secondary mt-3">Back to Home</a>
</div>

<script>
    $("#predictForm").submit(function(e) {
        e.preventDefault();
        const data = {};
        $(this).serializeArray().forEach(item => { data[item.name] = parseFloat(item.value); });
        $.ajax({
            url: "/predict",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify(data),
            success: function(response) {
                $("#result").text(`Prediction: ${response.prediction}, Label: ${response.label}`);
            },
            error: function(err) {
                $("#result").text(`Error: ${err.responseJSON.error}`);
            }
        });
    });
</script>
</body>
</html>
